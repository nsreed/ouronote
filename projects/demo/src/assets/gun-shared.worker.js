/*! For license information please see gun-shared.worker.js.LICENSE.txt */
(()=>{var t={458:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=458,t.exports=e},56:(t,e,n)=>{t.exports=n(429)},429:(t,e,n)=>{t=n.nmd(t),function(){function e(t,o){return o?n(458)(t):t.slice?e[i(t)]:function(n,o){t(n={exports:{}}),e[i(o)]=n.exports};function i(t){return t.split("/").slice(-1).toString().replace(".js","")}}var o=t;e((function(t){String.random=function(t,e){var n="";for(t=t||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t-- >0;)n+=e.charAt(Math.floor(Math.random()*e.length));return n},String.match=function(t,e){var n,o;return"string"==typeof t&&("string"==typeof e&&(e={"=":e}),t===(n=(e=e||{})["="]||e["*"]||e[">"]||e["<"])||o===e["="]&&(n=e["*"]||e[">"],t.slice(0,(n||"").length)===n||o===e["*"]&&(o!==e[">"]&&o!==e["<"]?t>=e[">"]&&t<=e["<"]:o!==e[">"]&&t>=e[">"]||o!==e["<"]&&t<=e["<"])))},String.hash=function(t,e){if("string"==typeof t){if(e=e||0,!t.length)return e;for(var n=0,o=t.length;n<o;++n)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}};var e,n,o,i,r=Object.prototype.hasOwnProperty;Object.plain=function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])},Object.empty=function(t,e){for(var n in t)if(r.call(t,n)&&(!e||-1==e.indexOf(n)))return!1;return!0},Object.keys=Object.keys||function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},e=setTimeout,n=0,o=0,i=typeof setImmediate!=""+void 0&&setImmediate||e,e.hold=e.hold||9,e.poll=e.poll||function(t){e.hold>=+new Date-n&&o++<3333?t():i((function(){n=+new Date,t()}),o=0)},function(){var t,e=setTimeout,n=e.turn=e.turn||function(t){1==o.push(t)&&i(a)},o=n.s=[],i=e.poll,r=0,a=function(){(t=o[r++])&&t(),r!=o.length&&99!=r||(o=n.s=o.slice(r),r=0),o.length&&i(a)}}(),function(){var t,e=setTimeout,n=e.turn;(e.each=e.each||function(e,o,i,r){r=r||9,function a(s,u,c){if(u=(s=(e||[]).splice(0,r)).length){for(var f=0;f<u&&t===(c=o(s[f]));f++);if(t===c)return void n(a)}i&&i(c)}()})()}()}))(e,"./shim"),e((function(t){t.exports=function t(e,n,o){if(!e)return{to:t};var i="function"==typeof n;e=(this.tag||(this.tag={}))[e]||i&&(this.tag[e]={tag:e,to:t._={next:function(t){var e;(e=this.to)&&e.next(t)}}});if(i){var r={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:n,the:e,on:this,as:o};return(r.back=e.last||e).to=r,e.last=r}return(e=e.to)&&undefined!==n&&e.next(n),e}}))(e,"./onto"),e((function(t){t.exports=function(t){return null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t&&t!=1/0&&t!=-1/0&&t==t||!!t&&"string"==typeof t["#"]&&1===Object.keys(t).length&&t["#"]}}))(e,"./valid"),e((function(t){function n(){var t=+new Date;return s<t?(r=0,s=t+n.drift):s=t+(r+=1)/a+n.drift}e("./shim"),n.drift=0;var o,i=-1/0,r=0,a=999,s=i;n.is=function(t,e,n){var o=e&&t&&t._&&t._[">"]||n;if(o)return"number"==typeof(o=o[e])?o:i},n.ify=function(t,e,n,i,r){(t=t||{})._=t._||{},r&&(t._["#"]=r);var a=t._[">"]||(t._[">"]={});return o!==e&&"_"!==e&&("number"==typeof n&&(a[e]=n),o!==i&&(t[e]=i)),t},t.exports=n}))(e,"./state"),e((function(t){e("./shim"),t.exports=function(t){var e={s:{}},n=e.s;t=t||{max:999,age:9e3},e.check=function(t){return!!n[t]&&o(t)};var o=e.track=function(o){var i=n[o]||(n[o]={});return i.was=e.now=+new Date,e.to||(e.to=setTimeout(e.drop,t.age+9)),i};return e.drop=function(o){e.to=null,e.now=+new Date;var i=Object.keys(n);console.STAT&&console.STAT(e.now,+new Date-e.now,"dup drop keys"),setTimeout.each(i,(function(i){var r=n[i];r&&(o||t.age)>e.now-r.was||delete n[i]}),0,99)},e}}))(e,"./dup"),e((function(t){e("./onto"),t.exports=function(t,e){if(this.on){var o=(this.opt||{}).lack||9e3;if("function"!=typeof t){if(!t)return;var i=t["#"]||t,r=(this.tag||"")[i];if(!r)return;return e&&(r=this.on(i,e),clearTimeout(r.err),r.err=setTimeout((function(){r.off()}),o)),!0}i=e&&e["#"]||n(9);if(!t)return i;var a=this.on(i,t,e);return a.err=a.err||setTimeout((function(){a.off(),a.next({err:"Error: No ACK yet.",lack:!0})}),o),i}};var n=String.random||function(){return Math.random().toString(36).slice(2)}}))(e,"./ask"),e((function(t){function n(t){return t instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:t}):new n(t)}n.is=function(t){return t instanceof n||t&&t._&&t===t._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},e("./shim"),n.valid=e("./valid"),n.state=e("./state"),n.on=e("./onto"),n.dup=e("./dup"),n.ask=e("./ask"),function(){function t(o){if(o)if(o.out!==t){var i,r=this.as,u=r.at||r,c=u.$,f=u.dup,l=o.DBG;if((i=o["#"])||(i=o["#"]=s(9)),!f.check(i)){if(f.track(i),i=o._,o._="function"==typeof i?i:function(){},o.$&&o.$===(o.$._||"").$||(o.$=c),o["@"]&&!o.put&&function(t){var e,n=t["@"]||"";if(!(e=n._))return;e.acks=(e.acks||0)+1,(e.err=t.err)&&(t["@"]=e["#"],a(e));e.stop||e.crack||(e.crack=e.match&&e.match.push((function(){h(e)})));h(e)}(o),!u.ask(o["@"],o)){if(l&&(l.u=+new Date),o.put)return void e(o);o.get&&n.on.get(o,c)}l&&(l.uc=+new Date),this.to.next(o),l&&(l.ua=+new Date),o.nts||o.NTS||(o.out=t,u.on("out",o),l&&(l.ue=+new Date))}}else this.to.next(o)}function e(e){if(e){var n=e._||"",r=n.root=((n.$=e.$||"")._||"").root;if(e["@"]&&n.faith&&!n.miss)return e.out=t,void r.on("out",e);n.latch=r.hatch,n.match=r.hatch=[];var s=e.put,f=n.DBG=e.DBG,l=+new Date;if(d=d||l,!s["#"]||!s["."]){f&&(f.p=l),n["#"]=e["#"],n.msg=e,n.all=0,n.stun=1;var p=Object.keys(s);console.STAT&&console.STAT(l,((f||n).pk=+new Date)-l,"put sort");var h,y,m,k,b,T,S,x=0;!function t(r){if(h!=x){if(h=x,!(m=p[x]))return console.STAT&&console.STAT(l,((f||n).pd=+new Date)-l,"put"),void a(n);(k=s[m])?(S=k._)?m!==S["#"]?T=g+v(m)+"soul not same.":(b=S[">"])||(T=g+v(m)+"no state."):T=g+v(m)+"no meta.":T=g+v(m)+"no node.",y=Object.keys(k||{})}if(T)return e.err=n.err=T,void a(n);var d,D=0;for(r=r||0;r++<9&&(d=y[D++]);)if("_"!==d){var O=k[d],_=b[d];if(i===_){T=g+v(d)+"on"+v(m)+"no state.";break}if(!c(O)){T=g+v(d)+"on"+v(m)+"bad "+typeof O+v(O);break}o(O,d,m,_,e),++w}(y=y.slice(D)).length?u(t):(++x,y=null,t(r))}()}}}function o(t,e,n,i,r){var a,s=r._||"",u=s.root,c=u.graph,l=c[n]||p,h=f(l,e,1),d=l[e],g=s.DBG;(a=console.STAT)&&(c[n]&&d||(a.has=(a.has||0)+1));var v=k();if(i>v)return setTimeout((function(){o(t,e,n,i,r)}),(a=i-v)>m?m:a),void(console.STAT&&console.STAT((g||s).Hf=+new Date,a,"future"));if((!(i<h)||s.miss)&&(s.faith||i!==h||!(t===d||y(t)<=y(d))||s.miss)){s.stun++;var w=r["#"]+s.all++,b={toString:function(){return w},_:s};b.toJSON=b.toString,g&&(g.ph=g.ph||+new Date),u.on("put",{"#":b,"@":r["@"],put:{"#":n,".":e,":":t,">":i},_:s})}}function r(t){var e;(e=(t._||"").DBG)&&(e.pa=+new Date,e.pm=e.pm||+new Date);var n,o=this.as,i=o.graph,r=t._,s=t.put,u=s["#"],c=s["."],f=s[":"],p=s[">"];t["#"];(n=r.msg)&&(n=n.put)&&(n=n[u])&&l(n,c,p,f,u),i[u]=l(i[u],c,p,f,u),(n=(o.next||"")[u])&&n.on("in",t),a(r),this.to.next(t)}function a(e,n){var o;if(!e.stop&&(e.err||!(0<--e.stun))&&(e.stop=1,o=e.root)){var i=e.match;i.end=1,i===o.hatch&&(!(i=e.latch)||i.end?delete o.hatch:o.hatch=i),e.hatch&&e.hatch(),setTimeout.each(e.match,(function(t){t&&t()})),!(n=e.msg)||e.err||n.err||(n.out=t,e.root.on("out",n),b())}}function h(t){t&&t.root&&(t.stun||t.acks!==t.all||t.root.on("in",{"@":t["#"],err:t.err,ok:t.err?i:{"":1}}))}n.create=function(e){e.root=e.root||e,e.graph=e.graph||{},e.on=e.on||n.on,e.ask=e.ask||n.ask,e.dup=e.dup||n.dup();var o=e.$.opt(e.opt);return e.once||(e.on("in",t,e),e.on("out",t,e),e.on("put",r,e),n.on("create",e),e.on("create",e)),e.once=1,o},n.on.put=e;var d,g="Error: Invalid graph!",v=function(t){return" '"+(""+t).slice(0,9)+"...' "},y=JSON.stringify,m=2147483647,k=n.state,w=0,b=function(){w>999&&w/-(d-(d=+new Date))>1&&(n.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),b=function(){w=0})}}(),function(){function t(t,e){var n=+new Date,o=t._||{},r=o.DBG=t.DBG,a=t["#"],u=s(9),c=Object.keys(e||"").sort(),p=((e||"")._||"")["#"],h=(c.length,t.$._.root),d=e===h.graph[p];console.STAT&&console.STAT(n,((r||o).gk=+new Date)-n,"got keys"),e&&function t(){n=+new Date;for(var o,g,v,y=0,m={};y<9&&(o=c[y++]);)l(m,o,f(e,o),e[o],p);c=c.slice(y),(g={})[p]=m,m=g,d&&((v=function(){}).ram=v.faith=!0),g=c.length,console.STAT&&console.STAT(n,-(n-(n=+new Date)),"got copied some"),r&&(r.ga=+new Date),h.on("in",{"@":a,"#":u,put:m,"%":g?u=s(9):i,$:h.$,_:v,DBG:r}),console.STAT&&console.STAT(n,+new Date-n,"got in"),g&&setTimeout.turn(t)}(),e||h.on("in",{"@":t["#"]})}n.on.get=function(e,n){var o=n._,r=e.get,a=r["#"],s=o.graph[a],u=r["."],c=((o.next||(o.next={}))[a],(e._||{}).DBG=e.DBG);if(c&&(c.g=+new Date),!s)return o.on("get",e);if(u){if("string"!=typeof u||i===s[u])return o.on("get",e);s=l({},u,f(s,u),s[u],a)}s&&t(e,s),o.on("get",e)},n.on.get.ack=t}(),n.chain.opt=function(t){t=t||{};var e=this._,o=t.peers||t;return Object.plain(t)||(t={}),Object.plain(e.opt)||(e.opt=t),"string"==typeof o&&(o=[o]),Object.plain(e.opt.peers)||(e.opt.peers={}),o instanceof Array&&(t.peers={},o.forEach((function(n){var o={};o.id=o.url=n,t.peers[n]=e.opt.peers[n]=e.opt.peers[n]||o}))),a(t,(function t(e){var n=this[e];this&&this.hasOwnProperty(e)||"string"==typeof n||Object.empty(n)?this[e]=n:(!n||n.constructor===Object||n instanceof Array)&&a(n,t)})),e.opt.from=t,n.on("opt",e),e.opt.uuid=e.opt.uuid||function(t){return n.state().toString(36).replace(".","")+String.random(t||12)},this};var i,r,a=function(t,e){Object.keys(t).forEach(e,t)},s=String.random,u=setTimeout.turn,c=n.valid,f=n.state.is,l=n.state.ify,p={};n.log=function(){return!n.log.off&&r.log.apply(r,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(t,e,o){return(o=n.log.once)[t]=o[t]||0,o[t]++||n.log(e)},"undefined"!=typeof window&&((window.GUN=window.Gun=n).window=window);try{void 0!==o&&(o.exports=n)}catch(t){}t.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(r=console).only=function(t,e){return r.only.i&&t===r.only.i&&r.only.i++&&(r.log.apply(r,arguments)||e)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")}))(e,"./root"),e((function(t){e("./root").chain.back=function(t,e){if(-1===(t=t||1)||1/0===t)return this._.root.$;if(1===t)return(this._.back||this._).$;var i=this._;if("string"==typeof t&&(t=t.split(".")),t instanceof Array){for(var r=0,a=t.length,s=i;r<a;r++)s=(s||o)[t[r]];return n!==s?e?this:s:(s=i.back)?s.$.back(t,e):void 0}if("function"==typeof t){var u;for(s={back:i};(s=s.back)&&n===(u=t(s,e)););return u}return"number"==typeof t?(i.back||i).$.back(t-1):this};var n,o={}}))(e,"./back"),e((function(t){var n=e("./root");function o(t,e){if(e=e||this.as||t.$._,(!t.$$||this===n.on)&&t.put&&!e.soul){var o=t.put||"",i=o["="]||o[":"],r=e.root,a=r.$.get(o["#"]).get(o["."])._;if("string"==typeof(i=c(i))){if(!(a.echo||(a.echo={}))[e.id]||(r.pass||"")[e.id]){if(s=r.pass){if(s[i+e.id])return;s[i+e.id]=1}(a.echo||(a.echo={}))[e.id]=e,e.has&&(e.link=i);var s,u=r.$.get(a.link=i)._;(u.echo||(u.echo={}))[a.id]=a,((s=e.ask||"")[""]||e.lex)&&u.on("out",{get:{"#":i}}),setTimeout.each(Object.keys(s),(function(t,e){t&&(e=s[t])&&e.on("out",{get:{"#":i,".":t}})}),0,99)}}else this===n.on&&((a.echo||(a.echo={}))[e.id]=e)}}function i(t,e){var n,o,r=t.put||"",s=a!==r["="]?r["="]:r[":"],u=e.root;if(a===s){if(e.soul&&a!==e.put)return;if(o=(t.$$||t.$||"")._||"",t["@"]&&(a!==o.put||a!==e.put))return;return(n=e.link||t.linked)&&delete(u.$.get(n)._.echo||"")[e.id],e.has&&(e.link=null),e.put=a,void setTimeout.each(Object.keys(e.next||""),(function(t,o){(o=e.next[t])&&(n&&delete(u.$.get(n).get(t)._.echo||"")[o.id],o.on("in",{get:t,put:a,$:o.$}))}),0,99)}e.soul||t.$$||(n=c(s),o=t.$._||"",(n!==o.link&&(!e.has||o.link)||(u.pass||"")[e.id]&&"string"!=typeof n)&&(delete(o.echo||"")[e.id],i({get:e.get,put:a,$:t.$,linked:t.linked=t.linked||o.link},e)))}function r(t,e){var o=this.as,i=o.$._,r=(i.root,o.get||""),s=(t.put||"")[r["#"]]||"";if(!t.put||"string"==typeof r["."]&&a===s[r["."]]){if(a!==i.put)return;if(!i.soul&&!i.has)return;return i.ack=(i.ack||0)+1,void i.on("in",{get:i.get,put:i.put=a,$:i.$,"@":t["@"]})}(t._||{}).miss=1,n.on.put(t)}n.chain.chain=function(t){var e,o=this,i=o._,r=new(t||o).constructor(o),a=r._;return a.root=e=i.root,a.id=++e.once,a.back=o._,a.on=n.on,a.on("in",n.on.in,a),a.on("out",n.on.out,a),r},n.on.out=function(t){var e,n,o=this.as,i=o.back,s=o.root;if(t.$||(t.$=o.$),this.to.next(t),!o.err){if(e=t.get){if(s.pass&&(s.pass[o.id]=o),o.lex&&Object.keys(o.lex).forEach((function(t){n[t]=o.lex[t]}),n=t.get=t.get||{}),e["#"]||o.soul){if(e["#"]=e["#"]||o.soul,t["#"]||(t["#"]=u(9)),i=s.$.get(e["#"])._,e=e["."]){if(f(i.put,e)&&(n=i.ask&&i.ask[e],(i.ask||(i.ask={}))[e]=i.$.get(e)._,i.on("in",{get:e,put:{"#":i.soul,".":e,":":i.put[e],">":p(s.graph[i.soul],e)}}),n))return}else{if(n=i.ask&&i.ask[""],(i.ask||(i.ask={}))[""]=i,a!==i.put&&(i.on("in",i),n))return;t.$=i.$}return s.ask(r,t),s.on("in",t)}if(e["."])return o.get?(t={get:{".":o.get},$:o.$},(i.ask||(i.ask={}))[o.get]=t.$._,i.on("out",t)):(t={get:o.lex?t.get:{},$:o.$},i.on("out",t));if((o.ask||(o.ask={}))[""]=o,o.get)return e["."]=o.get,(i.ask||(i.ask={}))[o.get]=t.$._,i.on("out",t)}return i.on("out",t)}o.on("in",{put:o.put=a,$:o.$})},n.on.in=function(t,e){var n,r=(e=e||this.as).root,u=t.$||(t.$=e.$),f=(u||"")._||s,l=t.put||"",d=l["#"],g=l["."],v=a!==l["="]?l["="]:l[":"],y=l[">"]||-1/0;if(a!==t.put&&(a===l["#"]||a===l["."]||a===l[":"]&&a===l["="]||a===l[">"]))return c(l)?void e.on("in",{$:f.back.$,put:{"#":d=f.back.soul,".":g=f.has||f.get,"=":l,">":p(f.back.put,g)},via:t}):(d=((l||"")._||"")["#"])?(u=e.root.$.get(d),setTimeout.each(Object.keys(l).sort(),(function(n){"_"!=n&&a!==(y=p(l,n))&&e.on("in",{$:u,put:{"#":d,".":n,"=":l[n],">":y},VIA:t})}))):void console.log("chain not yet supported for",l,"...",t,e);(t.seen||"")[e.id]||((t.seen||(t.seen=function(){}))[e.id]=e,e!==f&&(Object.keys(t).forEach((function(e){l[e]=t[e]}),l={}),l.get=e.get||l.get,e.soul||e.has?f.soul&&(l.$=e.$,l.$$=l.$$||f.$):l.$$$=l.$$$||e.$,t=l),i(t,e),(e.soul||t.$$)&&y>=p(r.graph[d],g)&&((l=r.$.get(d)._).put=h(l.put,g,y,v,d)),!f.soul&&y>=p(r.graph[d],g)&&(n=(r.$.get(d)._.next||"")[g])&&(n.put=v,"string"==typeof(l=c(v))&&(n.put=r.$.get(l)._.put||v)),this.to&&this.to.next(t),e.any&&setTimeout.each(Object.keys(e.any),(function(n){(n=e.any[n])&&n(t)}),0,99),e.echo&&setTimeout.each(Object.keys(e.echo),(function(n){(n=e.echo[n])&&n.on("in",t)}),0,99),((t.$$||"")._||f).soul&&(n=e.next)&&(n=n[g])&&(l={},Object.keys(t).forEach((function(e){l[e]=t[e]})),l.$=(t.$$||t.$).get(l.get=g),delete l.$$,delete l.$$$,n.on("in",l)),o(t,e))},n.on.link=o,n.on.unlink=i;var a,s={},u=String.random,c=n.valid,f=function(t,e){return t&&Object.prototype.hasOwnProperty.call(t,e)},l=n.state,p=l.is,h=l.ify}))(e,"./chain"),e((function(t){var n=e("./root");function o(t){var e=this.at||this.on;if(!t||e.soul||e.has)return this.off();if(t=(t=(t=t.$||t)._||t).id){var n;e.map;if((n=this.seen||(this.seen={}))[t])return!0;n[t]=!0}}n.chain.get=function(t,e,s){var u,c;if("string"==typeof t){if(0==t.length)return(u=this.chain())._.err={err:n.log("0 length key!",t)},e&&e.call(u,u._.err),u;(u=((l=this._).next||r)[t])||(u=t&&function(t,e){var n=e._,o=n.next,i=e.chain()._;o||(o=n.next={});o[i.get=t]=i,e===n.root.$?i.soul=t:(n.soul||n.has)&&(i.has=t);return i}(t,this)),u=u&&u.$}else{if("function"==typeof t){if(!0===e)return function(t,e,o,r){var a,s=t._,u=0;if(a=s.soul||s.link)return e(a,r,s);if(s.jam)return s.jam.push([e,r]);s.jam=[[e,r]],t.get((function(t,e){if(!(i===t.put&&!s.root.opt.super&&(a=Object.keys(s.root.opt.peers).length)&&++u<=a)){e.rid(t);var o,r=(r=t.$)&&r._||{},c=0;for(a=s.jam,delete s.jam;o=a[c++];){var f=o[0];o=o[1],f&&f(r.link||r.soul||n.valid(t.put)||((t.put||{})._||{})["#"],o,t,e)}}}),{out:{get:{".":!0}}})}(this,t,0,s),this;var f,l=(u=this)._,p=e||{},h=l.root;p.at=l,p.ok=t;var d={};function g(t,e,o){if(!g.stun&&(!(r=h.pass)||r[f])){var r,a=t.$._,s=(t.$$||"")._,u=(s||a).put,c=!a.has&&!a.soul,v={};if((c||i===u)&&(u=i===((r=t.put)||"")["="]?i===(r||"")[":"]?r:r[":"]:r["="]),"string"==typeof(r=n.valid(u))&&(u=i===(r=h.$.get(r)._.put)?p.not?i:u:r),!p.not||i!==u){if(i===p.stun){if((r=h.stun)&&r.on&&(l.$.back((function(t){if(r.on(""+t.id,v={}),(v.run||0)<g.id)return v})),!v.run&&r.on(""+a.id,v={}),!v.run&&s&&r.on(""+s.id,v={}),g.id>v.run&&(v.stun&&!v.stun.end||(v.stun=r.on("stun"),v.stun=v.stun&&v.stun.last),v.stun&&!v.stun.end)))return void((v.stun.add||(v.stun.add={}))[f]=function(){g(t,e,1)});if(i===u&&(o=0),(r=h.hatch)&&!r.end&&i===p.hatch&&!o){if(d[a.$._.id])return;return d[a.$._.id]=1,void r.push((function(){g(t,e,1)}))}d={}}if(h.pass){if(h.pass[f+a.id])return;h.pass[f+a.id]=1}p.on?p.ok.call(a.$,u,a.get,t,e||g):p.v2020?p.ok(t,e||g):(Object.keys(t).forEach((function(e){r[e]=t[e]}),r={}),(t=r).put=u,p.ok.call(p.as,t,e||g))}}}return g.at=l,(l.any||(l.any={}))[f=String.random(7)]=g,g.off=function(){g.stun=1,l.any&&delete l.any[f]},g.rid=o,g.id=p.run||++h.once,c=h.pass,(h.pass={})[f]=1,p.out=p.out||{get:{}},l.on("out",p.out),h.pass=c,u}if("number"==typeof t)return this.get(""+t,e,s);if("string"==typeof(c=a(t)))return this.get(c,e,s);(c=this.get.next)&&(u=c(this,t))}return u?(e&&"function"==typeof e&&u.get(e,s),u):((u=this.chain())._.err={err:n.log("Invalid get request!",t)},e&&e.call(u,u._.err),u)};var i,r={},a=n.valid}))(e,"./get"),e((function(t){var n=e("./root");function o(t,e){if(e){e=(e._||"").id||e;var o,i=t.root.stun||(t.root.stun={on:n.on}),r={};t.stun||(t.stun=i.on("stun",(function(){}))),(o=i.on(""+e))&&o.the.last.next(r),r.run>=t.run||i.on(""+e,(function(e){if(t.stun.end)return this.off(),void this.to.next(e);e.run=e.run||t.run,e.stun=e.stun||t.stun}))}}function i(t){if(t.err)i.end(t.stun,t.root);else if(!t.todo.length&&!t.end&&Object.empty(t.wait)){t.end=1;var e,o=t.$.back(-1)._,r=o.root,a=o.ask((function(e){r.on("ack",e),e.err&&n.log(e),++s>(t.acks||0)&&this.off(),t.ack&&t.ack(e,this)}),t.opt),s=0,u=t.stun;(e=function(){u&&(i.end(u,r),setTimeout.each(Object.keys(u=u.add||""),(function(t){(t=u[t])&&t()})))}).hatch=e,t.via._.on("out",{put:t.out=t.graph,opt:t.opt,"#":a,_:e})}}n.chain.put=function(t,e,a){var f=this,l=f._,p=l.root;(a=a||{}).root=l.root,a.run||(a.run=p.once),o(a,l.id),a.ack=a.ack||e,a.via=a.via||f,a.data=a.data||t,a.soul||(a.soul=l.soul||"string"==typeof e&&e);var h=a.state=a.state||n.state();return"function"==typeof t?(t((function(t){a.data=t,f.put(r,r,a)})),f):a.soul?(a.$=p.$.get(a.soul),a.todo=[{it:a.data,ref:a.$}],a.turn=a.turn||s,a.ran=a.ran||i,function t(){var e,r,s,f,l,p=a.todo,d=p.pop(),g=d.it;d.ref&&d.ref._.id;if(o(a,d.ref),(f=d.todo)&&(g=g[r=f.pop()],f.length&&p.push(d)),r&&(p.path||(p.path=[])).push(r),!(e=u(g))&&!(l=n.is(g))){if(!Object.plain(g))return void i.err(a,"Invalid data: "+function(t,e){return t&&(e=t.constructor)&&e.name||typeof t}(g)+" at "+(a.via.back((function(t){t.get&&f.push(t.get)}),f=[])||f.join("."))+"."+(p.path||[]).join("."));for(var v=a.seen||(a.seen=[]),y=v.length;y--;)if(g===(f=v[y]).it){e=g=f.link;break}}if(r&&e)d.node=c(d.node,r,h,g);else{if(!a.seen)return void i.err(a,"Data at root of graph must be a node (an object).");a.seen.push(s={it:g,link:{},todo:l?[]:Object.keys(g).sort().reverse(),path:(p.path||[]).slice(),up:d}),d.node=c(d.node,r,h,s.link),!l&&s.todo.length&&p.push(s);var m=a.seen.length;function k(t,e){var n=s.link["#"];e&&(e.off(),e.rid(t));var i=n||t.soul||(f=(t.$$||t.$)._||"").soul||f.link||((f=f.put||"")._||"")["#"]||f["#"]||((f=t.put||"")&&t.$$?f["#"]:(f["="]||f[":"]||"")["#"]);!n&&o(a,t.$),i||d.link["#"]?(i||(i=[],(t.$$||t.$).back((function(t){if(f=t.soul||t.link)return i.push(f);i.push(t.get)})),i=i.reverse().join("/")),s.link["#"]=i,!l&&(((a.graph||(a.graph={}))[i]=s.node||(s.node={_:{}}))._["#"]=i),delete a.wait[m],s.wait&&setTimeout.each(s.wait,(function(t){t&&t()})),a.ran(a)):(d.wait||(d.wait=[])).push((function(){k(t,e)}))}(a.wait||(a.wait={}))[m]="",f=(s.ref=l?g:r?d.ref.get(r):d.ref)._,(f=g&&(g._||"")["#"]||f.soul||f.link)?k({soul:f}):s.ref.get(k,{run:a.run,v2020:1,out:{get:{".":" "}}})}if(!p.length)return a.ran(a);a.turn(t)}(),f):(function(t){var e,n=t.via._;t.via=t.via.back((function(n){if(n.soul||!n.get)return n.$;e=t.data,(t.data={})[n.get]=e})),t.via&&t.via._.soul||(t.via=n.root.$.get(((t.data||"")._||"")["#"]||n.$.back("opt.uuid")()));t.via.put(t.data,t.ack,t)}(a),f)},i.end=function(t,e){t.end=a,t.the.to===t&&t===t.the.last&&delete e.stun,t.off()},i.err=function(t,e){(t.ack||a).call(t,t.out={err:t.err=n.log(e)}),t.ran(t)};var r,a=function(){},s=setTimeout.turn,u=n.valid,c=n.state.ify}))(e,"./put"),e((function(t){var n=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),t.exports=n}))(e,"./index"),e((function(t){var n=e("./index");n.chain.on=function(t,e,n,o){var i,r=this,a=r._;a.root;if("string"==typeof t)return e?(i=a.on(t,e,n||a,o),n&&n.$&&(n.subs||(n.subs=[])).push(i),r):a.on(t);var s=e;return(s=!0===s?{change:!0}:s||{}).not=1,s.on=1,r.get(t,s),r},n.chain.once=function(t,e){if(e=e||{},!t)return function(t,e,o){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(o=t.chain())._.nix=t.once((function(t,e){o._.on("in",this._)})),o._.lex=t._.lex,o}(this);var i,r=this,a=r._,s=a.root,u=(a.put,String.random(7));return r.get((function(r,c,f,l){var p=this,h=p._,d=h.one||(h.one={});function g(v){h.has||h.soul||(h={put:r,get:c}),o===(i=h.put)&&(i=((f.$$||"")._||"").put),"string"!=typeof n.valid(i)||(i=s.$.get(i)._.put)!==o||v?l.stun||""!==d[u]&&(d[u]="",(a.soul||a.has)&&l.off(),t.call(p,i,h.get),clearTimeout(d[u])):d[u]=setTimeout((function(){g(1)}),e.wait||99)}l.stun||""!==d[u]&&(!0!==(i=n.valid(r))?"string"!=typeof i&&(clearTimeout((a.one||"")[u]),clearTimeout(d[u]),d[u]=setTimeout(g,e.wait||99)):g())}),{on:1}),r},n.chain.off=function(){var t,e=this._,n=e.back;if(n)return e.ack=0,(t=n.next)&&t[e.get]&&delete t[e.get],(t=n.ask)&&delete t[e.get],(t=n.put)&&delete t[e.get],(t=e.soul)&&delete n.root.graph[t],(t=e.map)&&Object.keys(t).forEach((function(e,o){(o=t[e]).link&&n.root.$.get(o.link).off()})),(t=e.next)&&Object.keys(t).forEach((function(e,n){t[e].$.off()})),e.on("off",{}),this};var o}))(e,"./on"),e((function(t){var n=e("./index"),o=n.chain.get.next;function i(t){this.to.next(t);var e,o=this.as,i=t.$._,r=t.put;(i.soul||t.$$)&&((e=o.lex)&&!String.match(t.get||(r||"")["."],e["."]||e["#"]||e)||n.on.link(t,o))}n.chain.get.next=function(t,e){var n;return Object.plain(e)?(n=((n=e["#"])||"")["="]||n)?t.get(n):((n=t.chain()._).lex=e,t.on("in",(function(t){String.match(t.get||(t.put||"")["."],e["."]||e["#"]||e)&&n.on("in",t),this.to.next(t)})),n.$):(o||a)(t,e)},n.chain.map=function(t,e,o){var s,u,c=this,f=c._;return Object.plain(t)&&(s=t["."]?t:{".":t},t=r),t?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),u=c.chain(),c.map().on((function(e,o,i,s){var c=(t||a).call(this,e,o,i,s);if(r!==c){if(e===c)return u._.on("in",i);if(n.is(c))return u._.on("in",c._);var f={};Object.keys(i.put).forEach((function(t){f[t]=i.put[t]}),f),f["="]=c,u._.on("in",{get:o,put:f})}})),u):((u=f.each)||((f.each=u=c.chain())._.lex=s||u._.lex||f.lex,u._.nix=c.back("nix"),c.on("in",i,u._)),u)};var r,a=function(){}}))(e,"./map"),e((function(t){var n=e("./index");n.chain.set=function(t,e,o){var i,r,a=this,s=a.back(-1);return e=e||function(){},(o=o||{}).item=o.item||t,(i=((t||"")._||"")["#"])&&((t={})["#"]=i),"string"==typeof(r=n.valid(t))?a.get(i=r).put(t,e,o):n.is(t)?(a.put((function(o){t.get((function(t,i,s){if(!t)return e.call(a,{err:n.log('Only a node can be linked! Not "'+s.put+'"!')});(r={})[t]={"#":t},o(r)}),!0)})),t):(Object.plain(t)&&(t=s.get(i=a.back("opt.uuid")()).put(t)),a.get(i||s.back("opt.uuid")(7)).put(t,e,o))}}))(e,"./set"),e((function(t){e("./shim");var n=function(){},o=JSON.parseAsync||function(t,e,n){var o=+new Date;try{e(undefined,JSON.parse(t,n),i.sucks(+new Date-o))}catch(t){e(t)}},i=JSON.stringifyAsync||function(t,e,n,o){var r=+new Date;try{e(undefined,JSON.stringify(t,n,o),i.sucks(+new Date-r))}catch(t){e(t)}};i.sucks=function(t){t>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),i.sucks=n)};var r;try{t.exports=function(t){var e=function(){},n=t.opt||{};n.log=n.log||console.log,n.gap=n.gap||n.wait||0,n.max=n.max||.3*(n.memory?999*n.memory*999:3e8),n.pack=n.pack||.01*n.max*.01,n.puff=n.puff||9;var a=setTimeout.turn||setTimeout,s=t.dup,u=s.check,c=s.track,f=(new Date,e.hear=function(t,i){if(t){if(n.max<=t.length)return e.say({dam:"!",err:"Message too big!"},i);e===this&&(f.d+=t.length||0,++f.c);var r,s=i.SH=+new Date,u=t[0];return"["===u?(o(t,(function(t,o){if(t||!o)return e.say({dam:"!",err:"DAM JSON parse error."},i);console.STAT&&console.STAT(+new Date,o.length,"# on hear batch");var r=n.puff;!function t(){for(var n,s=+new Date,u=0;u<r&&(n=o[u++]);)e.hear(n,i);o=o.slice(u),console.STAT&&console.STAT(s,+new Date-s,"hear loop"),l(i),o.length&&a(t,0)}()})),void(t="")):"{"===u||(t["#"]||Object.plain(t))&&(r=t)?r?f.one(r,i,s):void o(t,(function(t,n){if(t||!n)return e.say({dam:"!",err:"DAM JSON parse error."},i);f.one(n,i,s)})):void 0}});function l(t){var e=t.batch,o="string"==typeof e;if(o&&(e+="]"),t.batch=t.tail=null,e&&!(o?3>e.length:!e.length)){if(!o)try{e=1===e.length?e[0]:JSON.stringify(e)}catch(t){return n.log("DAM JSON stringify error",t)}e&&p(e,t)}}function p(t,n){try{var o=n.wire;n.say?n.say(t):o.send&&o.send(t),e.say.d+=t.length||0,++e.say.c}catch(e){(n.queue=n.queue||[]).push(t)}}f.one=function(n,o,i){var r,a,f,l,p;if(n.DBG&&(n.DBG=p={DBG:n.DBG}),p&&(p.h=i),p&&(p.hp=+new Date),(r=n["#"])||(r=n["#"]=String.random(9)),!((f=u(r))||(a=n["##"])&&(f=n["@"]||n.get&&r)&&s.check(l=f+a))){if((n._=function(){}).via=e.leap=o,(f=n["><"])&&"string"==typeof f&&f.slice(0,99).split(",").forEach((function(t){this[t]=1}),n._.yo={}),f=n.dam)return(f=e.hear[f])&&f(n,o,t),void c(r);i=+new Date,p&&(p.is=i),o.SI=r,t.on("in",e.last=n),p&&(p.hd=+new Date),console.STAT&&console.STAT(i,+new Date-i,n.get?"msg get":n.put?"msg put":"msg"),(f=c(r)).via=o,n.get&&(f.it=n),l&&c(l),e.leap=e.last=null}},f.c=f.d=0,function(){var t,o=0;function f(t,e){var n;return e instanceof Object?(Object.keys(e).sort().forEach(h,{to:n={},on:e}),n):e}function h(t){this.to[t]=this.on[t]}e.hash=function(t,n){var o,r,s,u=+new Date;i(t.put,(function i(c,f){var l=(r||(r=s=f||"")).slice(0,32768);o=String.hash(l,o),(r=r.slice(32768))?a(i,0):(console.STAT&&console.STAT(u,+new Date-u,"say json+hash"),t._.$put=s,t["##"]=o,e.say(t,n),delete t._.$put)}),f)},e.say=function(i,u){var f;if((f=this)&&(f=f.to)&&f.next&&f.next(i),!i)return!1;var h,d,g=i["@"],v=i._||(i._=function(){}),y=i.DBG,m=+new Date;if(v.y=v.y||m,u||y&&(y.y=m),(h=i["#"])||(h=i["#"]=String.random(9)),!t&&c(h),i.put&&(i.err||(s.s[h]||"").err))return!1;if(i["##"]||r===i.put||v.via||!g){if(!u&&g&&(u=(f=s.s[g])&&(f.via||(f=f.it)&&(f=f._)&&f.via)||(f=e.last)&&g===f["#"]&&e.leap),!u&&g){if(s.s[g])return;return console.STAT&&console.STAT(+new Date,++o,"total no peer to ack to"),!1}if(!u&&e.way)return e.way(i);if(y&&(y.yh=+new Date),d=v.raw){if(y&&(y.yr=+new Date),!u||!u.id){if(!Object.plain(u||n.peers))return!1;m=+new Date,n.puff;var k=n.peers,w=Object.keys(u||n.peers||{});return console.STAT&&console.STAT(m,+new Date-m,"peer keys"),void function n(){var o=+new Date;t=1;var r=v.raw;v.raw=d;for(var s,u=0;u<9&&(s=(w||"")[u++]);)(s=k[s])&&e.say(i,s);v.raw=r,t=0,w=w.slice(u),console.STAT&&console.STAT(o,+new Date-o,"say loop"),w.length&&(a(n,0),g&&c(g))}()}if(!u.wire&&e.wire&&e.wire(u),h!==u.last){if(u.last=h,u===v.via)return!1;if((f=v.yo)&&(f[u.url]||f[u.pid]||f[u.id]))return!1;if(console.STAT&&console.STAT(m,((y||v).yp=+new Date)-(v.y||m),"say prep"),!t&&g&&c(g),u.batch){if(u.tail=(f=u.tail||0)+d.length,u.tail<=n.pack)return void(u.batch+=(f?",":"")+d);l(u)}u.batch="[";var b=+new Date;setTimeout((function(){console.STAT&&console.STAT(b,+new Date-b,"0ms TO"),l(u)}),n.gap),p(d,u),console.STAT&&g===u.SI&&console.STAT(m,+new Date-u.SH,"say ack")}}else e.raw(i,u)}else e.hash(i,u)},e.say.c=e.say.d=0,e.raw=function(t,o){if(!t)return"";var a,c,f=t._||{};if(c=f.raw)return c;if("string"==typeof t)return t;var l=t["##"],p=t["@"];if(l&&p){if(!f.via&&u(p+l))return!1;if((c=(s.s[p]||"").it)||(c=e.last)&&p===c["#"]){if(l===c["##"])return!1;c["##"]||(c["##"]=l)}}if(!t.dam){var h=0,d=[];for(var g in c=n.peers){var v=c[g];if(d.push(v.url||v.pid||v.id),++h>6)break}h>1&&(t["><"]=d.join())}if(a=f.$put)return c={},Object.keys(t).forEach((function(e){c[e]=t[e]})),c.put=":])([:",void i(c,(function(t,e){if(!t){var n=+new Date;c=e.indexOf('"put":":])([:"'),y(r,e=e.slice(0,c+6)+a+e.slice(c+14)),console.STAT&&console.STAT(n,+new Date-n,"say slice")}}));function y(n,i){n||(f.raw=i,e.say(t,o))}i(t,y)}}(),e.hi=function(o){var i,r=o.wire;r?(o.id?n.peers[o.url||o.id]=o:(i=o.id=o.id||String.random(9),e.say({dam:"?",pid:t.opt.pid},n.peers[i]=o),delete s.s[o.last]),o.met=o.met||+new Date,r.hied||t.on(r.hied="hi",o),i=o.queue,o.queue=[],setTimeout.each(i||[],(function(t){p(t,o)}),0,9)):e.wire(o.length&&{url:o}||o)},e.bye=function(n){t.on("bye",n);var o=+new Date;o-=n.met||o,e.bye.time=((e.bye.time||o)+o)/2},e.hear["!"]=function(t,e){n.log("Error:",t.err)},e.hear["?"]=function(t,o){t.pid&&(o.pid||(o.pid=t.pid),t["@"])||(e.say({dam:"?",pid:n.pid,"@":t["#"]},o),delete s.s[o.last])},t.on("create",(function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",e.say)})),t.on("bye",(function(t,e){t=n.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(e=t.wire)&&e.close&&e.close(),delete n.peers[t.id],t.wire=null}));var h={};return t.on("bye",(function(t,e){this.to.next(t),(e=console.STAT)&&(e.peers=(e.peers||0)-1),(e=t.url)&&(h[e]=!0,setTimeout((function(){delete h[e]}),n.lack||9e3))})),t.on("hi",(function(o,i){this.to.next(o),(i=console.STAT)&&(i.peers=(i.peers||0)+1),(i=o.url)&&h[i]&&(delete h[i],n.super||setTimeout.each(Object.keys(t.next),(function(n){t.next[n],(i={})[n]=t.graph[n],i=String.hash(i),e.say({"##":i,get:{"#":n}},o)})))})),e}}catch(t){}}))(e,"./mesh"),e((function(t){var n=e("../index");n.Mesh=e("./mesh"),n.on("opt",(function(t){if(this.to.next(t),!t.once){var e=t.opt;if(!1!==e.WebSocket){var o=n.window||{},i=e.WebSocket||o.WebSocket||o.webkitWebSocket||o.mozWebSocket;if(i){e.WebSocket=i;var r=e.mesh=e.mesh||n.Mesh(t);r.wire||e.wire;r.wire=e.wire=u,setTimeout((function(){!e.super&&t.on("out",{dam:"hi"})}),1);var a=1998,s=""+undefined!=typeof document&&document}}}function u(t){try{if(!t||!t.url)return o&&o(t);var n=t.url.replace(/^http/,"ws"),o=t.wire=new e.WebSocket(n);return o.onclose=function(){e.mesh.bye(t),c(t)},o.onerror=function(e){c(t)},o.onopen=function(){e.mesh.hi(t)},o.onmessage=function(n){n&&e.mesh.hear(n.data||n,t)},o}catch(t){}}function c(t){clearTimeout(t.defer),e.peers[t.url]&&(s&&t.retry<=0||(t.retry=(t.retry||e.retry+1||60)-(-t.tried+(t.tried=+new Date)<7992?1:0),t.defer=setTimeout((function e(){if(s&&s.hidden)return setTimeout(e,a);u(t)}),a)))}}))}))(e,"./websocket"),e((function(t){if("undefined"!=typeof Gun){var e;try{e=(Gun.window||function(){}).localStorage}catch(t){}e||(Gun.log("Warning: No localStorage exists to persist data to!"),e={setItem:function(t,e){this[t]=e},removeItem:function(t){delete this[t]},getItem:function(t){return this[t]}});JSON.parseAsync;var n=JSON.stringifyAsync||function(t,e,n,o){try{e(undefined,JSON.stringify(t,n,o))}catch(t){e(t)}};Gun.on("create",(function t(o){this.to.next(o);var i,r,a,s,u=o.opt,c=(o.graph,[]);if(!1!==u.localStorage){u.prefix=u.file||"gun/";try{i=t[u.prefix]=t[u.prefix]||JSON.parse(a=e.getItem(u.prefix))||{}}catch(e){i=t[u.prefix]={}}a=(a||"").length,o.on("get",(function(t){this.to.next(t);var e,n,o,r=t.get;r&&(e=r["#"])&&((n=i[e]||undefined)&&(o=r["."])&&!Object.plain(o)&&(n=Gun.state.ify({},o,Gun.state.is(n,o),n[o],e)),Gun.on.get.ack(t,n))})),o.on("put",(function(t){this.to.next(t);var e=t.put,n=e["#"],u=e["."],l=t["#"];i[n]=Gun.state.ify(i[n],u,e[">"],e[":"],n),s&&a>4999880?o.on("in",{"@":l,err:"localStorage max!"}):(t["@"]||c.push(l),r||(r=setTimeout(f,9+a/333)))}))}function f(){if(c.length||!((setTimeout.turn||"").s||"").length){var t=c;clearTimeout(r),r=!1,c=[],n(i,(function(n,r){try{!n&&e.setItem(u.prefix,r)}catch(t){n=s=t||"localStorage failure"}n&&(Gun.log(n+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),o.on("localStorage:error",{err:n,get:u.prefix,put:i})),a=r.length,(n||Object.empty(u.peers))&&setTimeout.each(t,(function(t){o.on("in",{"@":t,err:n,ok:0})}),0,99)}))}else setTimeout(f,99)}}))}}))(e,"./localStorage")}(),function(){if(""+b!=typeof Gun){var t=Gun;t.fn=t.fn||{is:function(t){return!!t&&"function"==typeof t}},t.bi=t.bi||{is:function(t){return t instanceof Boolean||"boolean"==typeof t}},t.num=t.num||{is:function(t){return!n(t)&&(t-parseFloat(t)+1>=0||1/0===t||-1/0===t)}},t.text=t.text||{is:function(t){return"string"==typeof t}},t.text.ify=t.text.ify||function(e){return t.text.is(e)?e:"undefined"!=typeof JSON?JSON.stringify(e):e&&e.toString?e.toString():e},t.text.random=t.text.random||function(t,e){var n="";for(t=t||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t>0;)n+=e.charAt(Math.floor(Math.random()*e.length)),t--;return n},t.text.match=t.text.match||function(t,e){var n,o;return"string"==typeof t&&("string"==typeof e&&(e={"=":e}),t===(n=(e=e||{})["="]||e["*"]||e[">"]||e["<"])||o===e["="]&&(n=e["*"]||e[">"]||e["<"],t.slice(0,(n||"").length)===n||o===e["*"]&&(o!==e[">"]&&o!==e["<"]?t>=e[">"]&&t<=e["<"]:o!==e[">"]&&t>=e[">"]||o!==e["<"]&&t<=e["<"])))},t.text.hash=t.text.hash||function(t,e){if("string"==typeof t){if(e=e||0,!t.length)return e;for(var n=0,o=t.length;n<o;++n)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}},t.list=t.list||{is:function(t){return t instanceof Array}},t.list.slit=t.list.slit||Array.prototype.slice,t.list.sort=t.list.sort||function(t){return function(e,n){return e&&n?(e=e[t])<(n=n[t])?-1:e>n?1:0:0}},t.list.map=t.list.map||function(t,e,n){return r(t,e,n)},t.list.index=1,t.obj=t.boj||{is:function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])}},t.obj.put=t.obj.put||function(t,e,n){return(t||{})[e]=n,t},t.obj.has=t.obj.has||function(t,e){return t&&Object.prototype.hasOwnProperty.call(t,e)},t.obj.del=t.obj.del||function(t,e){if(t)return t[e]=null,delete t[e],t},t.obj.as=t.obj.as||function(t,e,n,o){return t[e]=t[e]||(o===n?{}:n)},t.obj.ify=t.obj.ify||function(t){if(o(t))return t;try{t=JSON.parse(t)}catch(e){t={}}return t},function(){function e(t,e){i(this,e)&&undefined!==this[e]||(this[e]=t)}t.obj.to=t.obj.to||function(t,n){return r(t,e,n=n||{}),n}}(),t.obj.copy=t.obj.copy||function(t){return t?JSON.parse(JSON.stringify(t)):t},function(){function e(t,e){var n=this.n;if(!n||!(e===n||o(n)&&i(n,e)))return undefined!==e||void 0}t.obj.empty=t.obj.empty||function(t,n){return!t||!r(t,e,{n})}}(),function(){function e(t,n){if(2===arguments.length)return e.r=e.r||{},void(e.r[t]=n);e.r=e.r||[],e.r.push(t)}var r,a=Object.keys;Object.keys=Object.keys||function(t){return r(t,(function(t,e,n){n(e)}))},t.obj.map=r=t.obj.map||function(r,s,u){var c,f,l,p,h,d=0,g="function"==typeof s;if(e.r=c,a&&o(r)&&(p=a(r),h=!0),u=u||{},n(r)||p)for(f=(p||r).length;d<f;d++){var v=d+t.list.index;if(g){if((l=h?s.call(u,r[p[d]],p[d],e):s.call(u,r[d],v,e))!==c)return l}else if(s===r[h?p[d]:d])return p?p[d]:v}else for(d in r)if(g){if(i(r,d)&&(l=u?s.call(u,r[d],d,e):s(r[d],d,e))!==c)return l}else if(s===r[d])return d;return g?e.r:t.list.index?0:-1}}(),t.time=t.time||{},t.time.is=t.time.is||function(t){return t?t instanceof Date:+(new Date).getTime()};var e=t.fn.is,n=t.list.is,o=(w=t.obj).is,i=w.has,r=w.map,a={is:function(t){return t!==b&&(null===t||t!==1/0&&(!!(f(t)||u(t)||c(t))||(a.link.is(t)||!1)))}};a.link=a.rel={_:"#"},function(){function t(t,e){var n=this;return n.id?n.id=!1:e==s&&f(t)?void(n.id=t):n.id=!1}a.link.is=function(e){if(e&&e[s]&&!e._&&o(e)){var n={};if(r(e,t,n),n.id)return n.id}return!1}}(),a.link.ify=function(t){return l({},s,t)},t.obj.has._=".";var s=a.link._,u=t.bi.is,c=t.num.is,f=t.text.is,l=(o=(w=t.obj).is,w.put);r=w.map;t.val=t.val||a;var p={_:"_",soul:function(t,e){return t&&t._&&t._[e||g]}};p.soul.ify=function(t,e){return e="string"==typeof e?{soul:e}:e||{},(t=t||{})._=t._||{},t._[g]=e.soul||t._[g]||d(),t},p.soul._=a.link._,function(){function t(t,e){if(e!==p._)return!a.is(t)||void(this.cb&&this.cb.call(this.as,t,e,this.n,this.s))}p.is=function(e,n,i){var a;return!!o(e)&&(!!(a=p.soul(e))&&!r(e,t,{as:i,cb:n,s:a,n:e}))}}(),function(){function t(t,e){var n,o=this.o;o.map?undefined===(n=o.map.call(this.as,t,""+e,o.node))?h(o.node,e):o.node&&(o.node[e]=n):a.is(t)&&(o.node[e]=t)}p.ify=function(e,n,o){return n?"string"==typeof n?n={soul:n}:"function"==typeof n&&(n={map:n}):n={},n.map&&(n.node=n.map.call(o,e,b,n.node||{})),(n.node=p.soul.ify(n.node||{},n))&&r(e,t,{o:n,as:o}),n.node}}();o=(w=t.obj).is;var h=w.del,d=(r=w.map,t.text.random),g=p.soul._;t.node=t.node||p;var v=t.state;v.lex=function(){return v().toString(36).replace(".","")},v.to=function(t,e,n){var i=(t||{})[e];return o(i)&&(i=y(i)),v.ify(n,e,v.is(t,e),i,p.soul(t))},function(){function t(t,e){m!==e&&v.ify(this.o,e,this.s)}v.map=function(n,a,s){var u,f=o(f=n||a)?f:null;return n=e(n=n||a)?n:null,f&&!n?(a=c(a)?a:v(),f[m]=f[m]||{},r(f,t,{o:f,s:a}),f):(s=s||o(a)?a:u,a=c(a)?a:v(),function(e,o,r,c){if(!n)return t.call({o:r,s:a},e,o),e;n.call(s||this||{},e,o,r,c),i(r,o)&&u===r[o]||t.call({o:r,s:a},e,o)})}}();(w=t.obj).as,i=w.has,o=w.is,r=w.map;var y=w.copy,m=(c=t.num.is,e=t.fn.is,p._),k={};!function(){function t(t,n){if(!t||n!==p.soul(t)||!p.is(t,this.fn,this.as))return!0;this.cb&&(e.n=t,e.as=this.as,this.cb.call(e.as,t,n,e))}function e(t){t&&p.is(e.n,t,e.as)}k.is=function(e,n,i,a){return!(!e||!o(e)||T(e))&&!r(e,t,{cb:n,fn:i,as:a})}}(),function(){function e(t,e){var o;return(o=function(t,e){var n,o=t.seen,i=o.length;for(;i--;)if(n=o[i],e.obj===n.obj)return n;o.push(e)}(t,e))?o:(e.env=t,e.soul=r,p.ify(e.obj,n,e)&&(e.link=e.link||a.link.ify(p.soul(e.node)),e.obj!==t.shell&&(t.graph[a.link.is(e.link)]=e.node)),e)}function n(t,n,o){var r,u,c=this,f=c.env;if(p._===n&&i(t,a.link._))return o._;if(r=s(t,n,o,c,f)){if(n||(c.node=c.node||o||{},i(t,p._)&&p.soul(t)&&(c.node._=y(t._)),c.node=p.soul.ify(c.node,a.link.is(c.link)),c.link=c.link||a.link.ify(p.soul(c.node))),(u=f.map)&&(u.call(f.as||{},t,n,o,c),i(o,n))){if(t=o[n],b===t)return void h(o,n);if(!(r=s(t,n,o,c,f)))return}if(!n)return c.node;if(!0===r)return t;if((u=e(f,{obj:t,path:c.path.concat(n)})).node)return u.link}}function r(t){var e=this,n=a.link.is(e.link),o=e.env.graph;e.link=e.link||a.link.ify(t),e.link[a.link._]=t,e.node&&e.node[p._]&&(e.node[p._][a.link._]=t),i(o,n)&&(o[t]=o[n],h(o,n))}function s(e,n,i,r,u){var c;return!!a.is(e)||(o(e)?1:(c=u.invalid)?s(e=c.call(u.as||{},e,n,i),n,i,r,u):(u.err="Invalid value at '"+r.path.concat(n).join(".")+"'!",void(t.list.is(e)&&(u.err+=" Use `.set(item)` instead of an Array."))))}k.ify=function(t,n,o){var i={path:[],obj:t};return n?"string"==typeof n?n={soul:n}:"function"==typeof n&&(n.map=n):n={},"string"==typeof o&&(n.soul=n.soul||o,o=b),n.soul&&(i.link=a.link.ify(n.soul)),n.shell=(o||{}).shell,n.graph=n.graph||{},n.seen=n.seen||[],n.as=n.as||o,e(n,i),n.root=i.node,n.graph}}(),k.node=function(t){var e=p.soul(t);if(e)return l({},e,t)},function(){function t(t,e){var n,o;if(p._!==e)(n=a.link.is(t))?(o=this.opt.seen[n])?this.obj[e]=o:this.obj[e]=this.opt.seen[n]=k.to(this.graph,n,this.opt):this.obj[e]=t;else{if(T(t,a.link._))return;this.obj[e]=y(t)}}k.to=function(e,n,o){if(e){var i={};return o=o||{seen:{}},r(e[n],t,{obj:i,graph:e,opt:o}),i}}}();e=t.fn.is,o=(w=t.obj).is,h=w.del,i=w.has;var w,b,T=w.empty;l=w.put,r=w.map,y=w.copy;t.graph=t.graph||k}}()},321:(t,e,n)=>{!function(){function e(t){(t=t||{}).log=t.log||console.log,t.file=String(t.file||"radata");var o=(e.has||(e.has={}))[t.file];if(o)return o;function a(t){return encodeURIComponent(t).replace(/\*/g,"%2A")}t.max=t.max||.3*(t.memory?999*t.memory*999:3e8),t.until=t.until||t.wait||250,t.batch=t.batch||1e4,t.chunk=t.chunk||1048576,t.code=t.code||{},t.code.from=t.code.from||"!",t.jsonify=!0;var s=""+y==typeof setImmediate?setTimeout:setImmediate,u=setTimeout.turn||s,c=r.object,f=0;if(!t.store)return t.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!t.store.put)return t.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!t.store.get)return t.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");t.store.list,n(454);var l=JSON.parseAsync||function(t,e,n){try{e(undefined,JSON.parse(t,n))}catch(t){e(t)}},p=(JSON.stringifyAsync,function(t,e,n,o,i){if("function"==typeof e){var r=n||{};return n=e,void p.read(t,n,r,i||o)}p.save(t,e,n,o,i)});p.save=function(e,n,o,i,s){var u,c,f={key:e};f.find=function(e){var n;f.file=e||(e=t.code.from),s&&(s=s[e]=s[e]||{}),s&&(s.sf=s.sf||+new Date),(n=p.disk[e])?f.mix(y,n):p.parse(e,f.mix,y,s)},f.mix=function(a,u){if(s&&(s.sml=+new Date),s&&(s.sm=s.sm||+new Date),f.err=a||f.err)o(a);else{var c,l=f.file=(u||"").file||f.file;if(!u&&l!==t.code.from)return p.find.bad(l),void p.save(e,n,o,i);(u=p.disk[l]||(p.disk[l]=u||r())).file||(u.file=l),t.compare&&(n=t.compare(u(e),n,e,l),y===n)?o(a,-1):((f.disk=u)(e,n),i&&((c=(c=u.tags||(u.tags={}))[i]||(c[i]=p.tags[i]||(p.tags[i]={})))[l]||(c[l]=p.one[i]||(p.one[i]=o)),o=null),s&&(s.st=s.st||+new Date),u.Q?o&&u.Q.push(o):(u.Q=o?[o]:[],u.to=setTimeout(f.write,t.until)))}},f.write=function(){s&&(s.sto=s.sto||+new Date);var t=u=f.file,e=f.disk;c=f.q=e.Q,f.tags=e.tags,delete e.Q,delete p.disk[t],delete e.tags,p.write(t,e,f.ack,y,s)},f.ack=function(t,e){var n,o;for(var i in s&&(s.sa=s.sa||+new Date),s&&(s.sal=c.length),p.tags)if(p.tags.hasOwnProperty(i)){var r=p.tags[i];if(!((o=p.disk[u])&&(o=o.tags)&&o[r])){var l;for(var h in n=r[u],delete r[u],r)if(r.hasOwnProperty(h)){l=!0;break}l||(delete p.tags[r],n&&n(t,e))}}!c&&(c="");for(var d=c.length,g=0,v=+new Date;g<d;g++)(n=c[g])&&n(t,e);console.STAT&&console.STAT(v,+new Date-v,"rad acks",a(f.file)),console.STAT&&console.STAT(v,c.length,"rad acks #",a(f.file))},o||(o=function(t,e){}),p.find(e,f.find)},p.disk={},p.one={},p.tags={};var h,d,g,v=0;p.write=function(n,o,i,s,u){if(o){s="object"==typeof s?s:{force:s};var c,l,h=function(){};h.text="",h.file=n=o.file||(o.file=n),n?(h.write=function(){var e=o.raw=h.text;p.disk[n=o.file||h.file||n]=o;var r=+new Date;u&&(u.wd=r),p.find.add(n,(function(s){u&&(u.wa=+new Date),s?i(s):t.store.put(a(n),e,(function(t,e){u&&(u.wp=+new Date),console.STAT&&console.STAT(r,f=+new Date-r,"wrote disk",JSON.stringify(n),++v,"total all writes."),i(t,e||1),o.Q||delete p.disk[n]}))}))},h.split=function(){var t=+new Date;u&&(u.wf=t),h.text="",h.count||(h.count=0,r.map(o,(function(){h.count++}))),u&&(u.wfc=h.count),h.limit=Math.ceil(h.count/2);var e=h.count;return h.count=0,u&&(u.wf1=+new Date),h.sub=r(),r.map(o,h.slice,{reverse:1}),u&&(u.wf2=+new Date),p.write(h.end,h.sub,h.both,s),u&&(u.wf3=+new Date),h.hub=r(),r.map(o,h.stop),u&&(u.wf4=+new Date),p.write(o.file,h.hub,h.both,s),u&&(u.wf5=+new Date),console.STAT&&console.STAT(t,+new Date-t,"rad split",a(o.file),e),!0},h.slice=function(t,e){if(h.sub(h.end=e,t),h.limit<=++h.count)return!0},h.stop=function(t,e){if(e>=h.end)return!0;h.hub(e,t)},h.both=function(t,e){u&&(u.wfd=+new Date),l?i(t||l):c?i(t,e):(c=!0,l=t)},h.each=function(n,o,r,a){if(y!==n&&h.count++,t.max<=(n||"").length)return i("Data too big!"),!0;var u=e.encode(a.length)+"#"+e.encode(r)+(y===n?"":":"+e.encode(n))+"\n";if(t.chunk<h.text.length+u.length&&1<h.count&&!s.force)return h.split();h.text+=u},t.jsonify?p.write.jsonify(h,o,i,s,u):r.map(o,h.each,!0)||h.write()):i("What file?")}else i("No radix!")},p.write.jsonify=function(e,n,o,i,a){var s,u=+new Date;a&&(a.w=u);try{s=JSON.stringify(n.$)}catch(t){return void o("Cannot radisk!")}if(a&&(a.ws=+new Date),console.STAT&&console.STAT(u,+new Date-u,"rad stringified JSON"),t.chunk<s.length&&!i.force){var c=0;if(r.map(n,(function(){if(c++)return!0})),c>1)return e.split()}e.text=s,e.write()},p.range=function(t,e){if(t&&e){if(y===e.start&&y===e.end)return t;if(y!==(n=t)&&(!n||"object"!=typeof n))return t;var n,o=r();return r.map(t,(function(t,e){o(e,t)}),e),o("")}},p.read=function(e,n,o,i){o=o||{};var c={key:e,find:function(e){var n;c.file=e||(e=t.code.from),i&&(i=i[e]=i[e]||{}),i&&(i.rf=i.rf||+new Date),(n=p.disk[c.file=e])?c.check(y,n):p.parse(e,c.check,y,i)},get:function(a,u,f){if(i&&(i.rgl=+new Date),i&&(i.rg=i.rg||+new Date),c.err=a||c.err)n(a);else{var l=c.file=(u||"").file||c.file;if(!u&&l!==t.code.from)return p.find.bad(l),void p.read(e,n,o);if(u=p.disk[l]||(p.disk[l]=u)){u.file||(u.file=l);var h=p.range(u(e),o);if(i&&(i.rr=+new Date),o.unit=u.unit,o.chunks=(o.chunks||0)+1,o.parsed=(o.parsed||0)+((f||"").parsed||o.chunks*t.chunk),o.more=1,o.next=y,r.map(p.list,(function(t,e){if(t&&l!==e)return o.next=e,1}),o.reverse?{reverse:1,end:l}:{start:l}),i&&(i.rl=+new Date),o.next||(o.more=0),o.next&&(!o.reverse&&(e<o.next&&0!=o.next.indexOf(e)||y!==o.end&&(o.end||"￿")<o.next)&&(o.more=0),o.reverse&&(e>o.next&&0!=e.indexOf(o.next)||y!==o.start&&(o.start||"")>o.next&&l<=o.start)&&(o.more=0)),o.more){if(h&&n(c.err,h,o),!(o.parsed>=o.limit)){var d=+new Date;i&&(i.rm=d);var g=o.next;s((function(){console.STAT&&console.STAT(d,+new Date-d,"rad more"),p.parse(g,c.check)}),0)}}else n(c.err,h,o)}else n(l===t.code.from?y:"No file!")}},check:function(e,n,o){if(c.get(e,n,o),n&&!n.check){n.check=1;var i=+new Date;(o||(o={})).file||(o.file=c.file),r.map(n,(function(e,n){p.find(n,(function(i){if((i||(i=t.code.from))!==o.file){var r=(""+Math.random()).slice(-3);u((function(){p.save(n,e,(function t(s,u){s?p.save(n,e,t):console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",r,a(n),a(o.file),a(i))}))}),0)}}))})),console.STAT&&console.STAT(i,+new Date-i,"rad check")}}};p.find(e||(o.reverse?o.end||"":o.start||""),c.find)},h=0,d={},g=String.fromCharCode(31),p.parse=function(n,o,i,s){var c;if(!n)return o();if(c=d[n])c.push(o);else{c=d[n]=[o];var v=function(){},m={file:n};(v.disk=r()).file=n,v.read=function(e,o){if(s&&(s.rpg=+new Date),console.STAT&&console.STAT(k,+new Date-k,"read disk",JSON.stringify(n),++h,"total all parses."),(v.err=e)||(v.not=!o))return delete d[n],void v.map(c,v.ack);if("string"!=typeof o){try{t.max<=o.length?v.err="Chunk too big!":o=o.toString()}catch(t){v.err=t}if(v.err)return delete d[n],void v.map(c,v.ack)}m.parsed=o.length,s&&(s.rpl=m.parsed),s&&(s.rpa=c.length),k=+new Date,t.jsonify||"{"===o[0]?l(o,(function(t,e){return t?"{"===o[0]?(delete d[n],v.err="JSON error!",void v.map(c,v.ack)):void v.radec(t,o):(delete d[n],v.disk.$=e,console.STAT&&(f=+new Date-k)>9&&console.STAT(k,f,"rad parsed JSON"),s&&(s.rpd=+new Date),void v.map(c,v.ack))})):v.radec(e,o)},v.map=function(){if(c&&c.length){for(var t,e=+new Date,o=v.err,i=v.not?y:v.disk,r=0;r<9&&(t=c[r++]);)t(o,i,m);console.STAT&&console.STAT(e,+new Date-e,"rad packs",a(n)),console.STAT&&console.STAT(e,r,"rad packs #",a(n)),(c=c.slice(r)).length&&u(v.map,0)}},v.ack=function(t){t&&(v.err||v.not?t(v.err,y,m):t(y,v.disk,m))},v.radec=function(t,e){delete d[n],k=+new Date;var o,i,r,a=v.split(e),s=[];if(!a||0!==a[1])return v.err="File '"+n+"' does not have root radix! ",void v.map(c,v.ack);for(;a;)i=r=y,o=a[1],"#"==(a=v.split(a[2])||"")[0]&&(i=a[1],o<=(s=s.slice(0,o)).length&&s.push(i)),"\n"!=(a=v.split(a[2])||"")[0]&&("="!=a[0]&&":"!=a[0]||(r=a[1]),y!==i&&y!==r&&v.disk(s.join(""),r),a=v.split(a[2]));console.STAT&&console.STAT(k,+new Date-k,"parsed RAD"),v.map(c,v.ack)},v.split=function(t){if(t){var n,o,i=[],r={};if(n=t.indexOf(g),t[n])return o=t.slice(0,n),i[0]=o,i[1]=e.decode(t.slice(n),r),i[2]=t.slice(n+r.i),i}},p.disk&&(i||(i=(p.disk[n]||"").raw));var k=+new Date;if(s&&(s.rp=k),i)return u((function(){v.read(y,i)}),0);t.store.get(a(n),v.read)}},function(){var e,n,o=String.fromCharCode(28);function i(n,s){if(n)return t.log("list",n),void setTimeout((function(){p.parse(o,i)}),1e3);s?a(s):(e=e||s||r(),t.store.list?t.store.list((function(t){t?p.find.add(t,m):a(e)})):a(e))}function a(t,i){(e=e||t).file=o,i=n,n=null,c(i,(function(t){p.find(t[0],t[1])}))}p.find=function(a,s){if(!e)return n?void n.push([a,s]):(n=[[a,s]],void p.parse(o,i));r.map(p.list=e,(function(t,e){if(t)return s(e)||!0}),{reverse:1,end:a})||s(t.code.from)},p.find.add=function(t,n){e(t)||t===o?n(y,1):(e(t,1),n.found=(n.found||0)+1,p.write(o,e,(function(t,e){t?n(t):(n.found=(n.found||0)-1,0===n.found&&n(y,1))}),!0))},p.find.bad=function(t,n){e(t,0),p.write(o,e,n||m)}}();try{!i.window&&n(221)(p)}catch(t){}var y,m=function(){};return e.has[t.file]=p,p}var o;if(o=String.fromCharCode(31),e.encode=function(t,e,n){var i=n=n||o;if("string"==typeof t){for(var r=t.indexOf(n);-1!=r;)i+=n,r=t.indexOf(n,r+1);return i+'"'+t+n}return t&&t["#"]&&1==Object.keys(t).length?i+"#"+void 0+i:"number"==typeof t?i+"+"+(t||0)+i:null===t?i+" "+i:!0===t?i+"+"+i:!1===t?i+"-"+i:void 0},e.decode=function(t,e,n){var i,r,a,s=-1,u=0;if((n=n||o)===t[0]){for(;n===t[++s];)++u;for(a=t[r=u]||!0;--u>=0;)s=t.indexOf(n,s+1);return-1==s&&(s=t.length),i=t.slice(r+1,s),e&&(e.i=s+1),'"'===a?i:"#"===a?{"#":i}:"+"===a?0===i.length||parseFloat(i):" "===a?null:"-"!==a&&void 0}},"undefined"!=typeof window){var i=window.Gun,r=window.Radix;window.Radisk=e}else{i=n(429),r=n(970);try{t.exports=e}catch(t){}}e.Radix=r}()},970:t=>{!function(){function e(){var t=function(i,a,s){if(t.unit=0,s||n===a||(t.last=""+i<t.last?t.last:""+i,delete(t.$||{})[r]),s=s||t.$||(t.$={}),!i&&Object.keys(s).length)return s;for(var u,c,f=0,l=(i=""+i).length-1,p=i[f];!(u=s[p])&&f<l;)p+=i[++f];if(u){if(f!=l)return n!==a&&delete u[r],t(i.slice(++f),a,u||(u={}));if(n===a)return n===(c=u[""])?u:(t.unit=1)&&c;u[""]=a}else{if(!o(s,(function(t,o){var r=0,u="";if((o||"").length)for(;o[r]==i[r];)u+=o[r++];if(u){if(n===a){if(r<=l)return;return(c||(c={}))[o.slice(r)]=t,t}var f={};return f[o.slice(r)]=t,""===(r=i.slice(r))?f[""]=a:(f[r]={})[""]=a,s[u]=f,e.debug&&"undefined"==""+u&&console.log(0,u),delete s[o],!0}}))){if(n===a)return;(s[p]||(s[p]={}))[""]=a,e.debug&&"undefined"==""+p&&console.log(1,p)}if(n===a)return c}};return t}if(e.map=function t(o,a,s,u){u=u||[];var c="function"==typeof o?o.$||{}:o;if(c)if("string"!=typeof c){var f,l=(c[r]||i).sort||(c[r]=function t(){return t.sort=Object.keys(c).sort(),t}()).sort;(f=(s=!0===s?{branch:!0}:s||{}).reverse)&&(l=l.slice(0).reverse());for(var p=s.start,h=s.end,d=0,g=l.length;d<g;d++){var v,y,m,k=l[d],w=c[k];if(w&&""!==k&&r!==k&&"undefined"!==k&&((y=u.slice(0)).push(k),m=y.join(""),!(n!==p&&m<(p||"").slice(0,m.length)||n!==h&&(h||"￿")<m))){if(f&&(v=t(w,a,s,y),n!==v))return v;if(n!==(v=w[""])){var b=1;if(n!==p&&m<(p||"")&&(b=0),n!==h&&m>(h||"￿")&&(b=0),b&&(v=a(v,m,k,u),n!==v))return v}else if(s.branch&&(v=a(n,m,k,u),n!==v))return v;if(u=y,!f&&(v=t(w,a,s,u),n!==v))return v;u.pop()}}}else if(e.debug)throw["BUG:",o,a,s,u]},"undefined"!=typeof window)window.Radix=e;else try{t.exports=e}catch(t){}var n,o=e.object=function(t,e,o){for(var i in t)if(t.hasOwnProperty(i)&&(o=e(t[i],i))!==n)return o},i={},r=String.fromCharCode(24)}()},221:(t,e,n)=>{t.exports=function(t){var e=n(970);t.find("a",(function(){var n,o,i=[];e.map(t.list,(function(t,e){e.indexOf("%1B")+1&&t&&i.push([e,t])})),i.length&&console.log("\n! ! ! WARNING ! ! !\nRAD v0.2020.x has detected OLD v0.2019.x data & automatically migrating. Automatic migration will be turned OFF in future versions! If you are just developing/testing, we recommend you reset your data. Please contact us if you have any concerns.\nThis message should only log once."),i.forEach((function(e){n=e[0],o=e[1],t.list(decodeURIComponent(n),o),t.list(n,0)})),n&&t.find.bad(n)}))}},454:t=>{!function(){var e,n={},o=setTimeout.turn||typeof setImmediate!=""+e&&setImmediate||setTimeout;function i(t){var e=parseFloat(t);return isNaN(e)?"true"==(t=t.trim())||"false"!=t&&("null"==t?null:void 0):e}n.parseAsync=function(t,n,r,a){if("string"==typeof t){var s={i:0,text:t,done:n,l:t.length,up:[]};a=a||32768,function n(){var r,u,c=s.text,f=s.i,l=s.l,p=0,h=s.w;for(;p++<a;){var d=c[f++];if(f>l){s.end=!0;break}if(h){for(f=c.indexOf('"',f-1),d=c[f],u=0;"\\"==c[f-++u];);u=!(u%2),r=r||u,'"'!=d||u||(h=e,u=s.s,s.a?(u=c.slice(s.sl,f),(r||1+u.indexOf("\\"))&&(u=JSON.parse('"'+u+'"')),s.at instanceof Array?s.at.push(s.s=u):(s.at||(s.end=p=a,u=e),(s.at||{})[s.s]=s.s=u),s.s=e):(s.s=c.slice(s.sl,f),(r||1+s.s.indexOf("\\"))&&(s.s=JSON.parse('"'+s.s+'"'))),s.a=r=e),++f}else switch(d){case'"':s.sl=f,h=!0;break;case":":s.ai=f,s.a=!0;break;case",":(s.a||s.at instanceof Array)&&(u=c.slice(s.ai,f-1))&&e!==(u=i(u))&&(s.at instanceof Array?s.at.push(u):s.at[s.s]=u),s.a=e,s.at instanceof Array&&(s.a=!0,s.ai=f);break;case"{":s.up.push(s.at||(s.at={})),s.at instanceof Array?s.at.push(s.at={}):e!==(u=s.s)&&(s.at[u]=s.at={}),s.a=e;break;case"}":s.a&&(u=c.slice(s.ai,f-1))&&e!==(u=i(u))&&(s.at instanceof Array?s.at.push(u):(s.at||(s.end=p=a,u=e),(s.at||{})[s.s]=u)),s.a=e,s.at=s.up.pop();break;case"[":e!==(u=s.s)?(s.up.push(s.at),s.at[u]=s.at=[]):s.at||s.up.push(s.at=[]),s.a=!0,s.ai=f;break;case"]":s.a&&(u=c.slice(s.ai,f-1))&&e!==(u=i(u))&&(s.at instanceof Array?s.at.push(u):s.at[s.s]=u),s.a=e,s.at=s.up.pop()}}if(s.s=e,s.i=f,s.w=h,s.end){if(u=s.at,e===u)try{u=JSON.parse(t)}catch(t){return s.done(t)}s.done(e,u)}else o(n)}()}else try{n(e,JSON.parse(t))}catch(t){n(t)}},n.stringifyAsync=function(t,n,i,r,a){(a=a||{}).text=a.text||"",a.up=[a.at={d:t}],a.done=n,a.i=0;var s=0;!function t(){var n,i=a.at,r=i.d,u="";i.i&&i.i-i.j>0&&(u+=",");e!==(n=i.k)&&(u+=JSON.stringify(n)+":");switch(typeof r){case"boolean":u+=""+r;break;case"string":u+=JSON.stringify(r);break;case"number":u+=r;break;case"object":if(!r){u+="null";break}if(r instanceof Array){u+="[",(i={i:-1,as:r,up:i,j:0}).l=r.length,a.up.push(a.at=i);break}if("function"!=typeof(r||"").toJSON){u+="{",(i={i:-1,ok:Object.keys(r).sort(),as:r,up:i,j:0}).l=i.ok.length,a.up.push(a.at=i);break}if(n=r.toJSON()){u+=n;break}case"function":if(i.as instanceof Array){u+="null";break}default:u="",i.j++}a.text+=u;for(;1+i.i>=i.l;)a.text+=i.ok?"}":"]",i=a.at=i.up;if(++i.i<i.l)return(n=i.ok)?i.d=i.as[i.k=n[i.i]]:i.d=i.as[i.i],++s<9?t():(s=0,void o(t));a.done(e,a.text)}()},typeof window!=""+e&&(window.YSON=n);try{t.exports=n}catch(t){}typeof JSON!=""+e&&(JSON.parseAsync=n.parseAsync,JSON.stringifyAsync=n.stringifyAsync)}()},982:(t,e,n)=>{n(938);var o=function(){},i=JSON.parseAsync||function(t,e,n){var o=+new Date;try{e(undefined,JSON.parse(t,n),r.sucks(+new Date-o))}catch(t){e(t)}},r=JSON.stringifyAsync||function(t,e,n,o){var i=+new Date;try{e(undefined,JSON.stringify(t,n,o),r.sucks(+new Date-i))}catch(t){e(t)}};r.sucks=function(t){t>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),r.sucks=o)};var a;try{t.exports=function(t){var e=function(){},n=t.opt||{};n.log=n.log||console.log,n.gap=n.gap||n.wait||0,n.max=n.max||.3*(n.memory?999*n.memory*999:3e8),n.pack=n.pack||.01*n.max*.01,n.puff=n.puff||9;var o=setTimeout.turn||setTimeout,s=t.dup,u=s.check,c=s.track,f=(new Date,e.hear=function(t,r){if(t){if(n.max<=t.length)return e.say({dam:"!",err:"Message too big!"},r);e===this&&(f.d+=t.length||0,++f.c);var a,s=r.SH=+new Date,u=t[0];return"["===u?(i(t,(function(t,i){if(t||!i)return e.say({dam:"!",err:"DAM JSON parse error."},r);console.STAT&&console.STAT(+new Date,i.length,"# on hear batch");var a=n.puff;!function t(){for(var n,s=+new Date,u=0;u<a&&(n=i[u++]);)e.hear(n,r);i=i.slice(u),console.STAT&&console.STAT(s,+new Date-s,"hear loop"),l(r),i.length&&o(t,0)}()})),void(t="")):"{"===u||(t["#"]||Object.plain(t))&&(a=t)?a?f.one(a,r,s):void i(t,(function(t,n){if(t||!n)return e.say({dam:"!",err:"DAM JSON parse error."},r);f.one(n,r,s)})):void 0}});function l(t){var e=t.batch,o="string"==typeof e;if(o&&(e+="]"),t.batch=t.tail=null,e&&!(o?3>e.length:!e.length)){if(!o)try{e=1===e.length?e[0]:JSON.stringify(e)}catch(t){return n.log("DAM JSON stringify error",t)}e&&p(e,t)}}function p(t,n){try{var o=n.wire;n.say?n.say(t):o.send&&o.send(t),e.say.d+=t.length||0,++e.say.c}catch(e){(n.queue=n.queue||[]).push(t)}}f.one=function(n,o,i){var r,a,f,l,p;if(n.DBG&&(n.DBG=p={DBG:n.DBG}),p&&(p.h=i),p&&(p.hp=+new Date),(r=n["#"])||(r=n["#"]=String.random(9)),!((f=u(r))||(a=n["##"])&&(f=n["@"]||n.get&&r)&&s.check(l=f+a))){if((n._=function(){}).via=e.leap=o,(f=n["><"])&&"string"==typeof f&&f.slice(0,99).split(",").forEach((function(t){this[t]=1}),n._.yo={}),f=n.dam)return(f=e.hear[f])&&f(n,o,t),void c(r);i=+new Date,p&&(p.is=i),o.SI=r,t.on("in",e.last=n),p&&(p.hd=+new Date),console.STAT&&console.STAT(i,+new Date-i,n.get?"msg get":n.put?"msg put":"msg"),(f=c(r)).via=o,n.get&&(f.it=n),l&&c(l),e.leap=e.last=null}},f.c=f.d=0,function(){var t,i=0;function f(t,e){var n;return e instanceof Object?(Object.keys(e).sort().forEach(h,{to:n={},on:e}),n):e}function h(t){this.to[t]=this.on[t]}e.hash=function(t,n){var i,a,s,u=+new Date;r(t.put,(function r(c,f){var l=(a||(a=s=f||"")).slice(0,32768);i=String.hash(l,i),(a=a.slice(32768))?o(r,0):(console.STAT&&console.STAT(u,+new Date-u,"say json+hash"),t._.$put=s,t["##"]=i,e.say(t,n),delete t._.$put)}),f)},e.say=function(r,u){var f;if((f=this)&&(f=f.to)&&f.next&&f.next(r),!r)return!1;var h,d,g=r["@"],v=r._||(r._=function(){}),y=r.DBG,m=+new Date;if(v.y=v.y||m,u||y&&(y.y=m),(h=r["#"])||(h=r["#"]=String.random(9)),!t&&c(h),r.put&&(r.err||(s.s[h]||"").err))return!1;if(r["##"]||a===r.put||v.via||!g){if(!u&&g&&(u=(f=s.s[g])&&(f.via||(f=f.it)&&(f=f._)&&f.via)||(f=e.last)&&g===f["#"]&&e.leap),!u&&g){if(s.s[g])return;return console.STAT&&console.STAT(+new Date,++i,"total no peer to ack to"),!1}if(!u&&e.way)return e.way(r);if(y&&(y.yh=+new Date),d=v.raw){if(y&&(y.yr=+new Date),!u||!u.id){if(!Object.plain(u||n.peers))return!1;m=+new Date,n.puff;var k=n.peers,w=Object.keys(u||n.peers||{});return console.STAT&&console.STAT(m,+new Date-m,"peer keys"),void function n(){var i=+new Date;t=1;var a=v.raw;v.raw=d;for(var s,u=0;u<9&&(s=(w||"")[u++]);)(s=k[s])&&e.say(r,s);v.raw=a,t=0,w=w.slice(u),console.STAT&&console.STAT(i,+new Date-i,"say loop"),w.length&&(o(n,0),g&&c(g))}()}if(!u.wire&&e.wire&&e.wire(u),h!==u.last){if(u.last=h,u===v.via)return!1;if((f=v.yo)&&(f[u.url]||f[u.pid]||f[u.id]))return!1;if(console.STAT&&console.STAT(m,((y||v).yp=+new Date)-(v.y||m),"say prep"),!t&&g&&c(g),u.batch){if(u.tail=(f=u.tail||0)+d.length,u.tail<=n.pack)return void(u.batch+=(f?",":"")+d);l(u)}u.batch="[";var b=+new Date;setTimeout((function(){console.STAT&&console.STAT(b,+new Date-b,"0ms TO"),l(u)}),n.gap),p(d,u),console.STAT&&g===u.SI&&console.STAT(m,+new Date-u.SH,"say ack")}}else e.raw(r,u)}else e.hash(r,u)},e.say.c=e.say.d=0,e.raw=function(t,o){if(!t)return"";var i,c,f=t._||{};if(c=f.raw)return c;if("string"==typeof t)return t;var l=t["##"],p=t["@"];if(l&&p){if(!f.via&&u(p+l))return!1;if((c=(s.s[p]||"").it)||(c=e.last)&&p===c["#"]){if(l===c["##"])return!1;c["##"]||(c["##"]=l)}}if(!t.dam){var h=0,d=[];for(var g in c=n.peers){var v=c[g];if(d.push(v.url||v.pid||v.id),++h>6)break}h>1&&(t["><"]=d.join())}if(i=f.$put)return c={},Object.keys(t).forEach((function(e){c[e]=t[e]})),c.put=":])([:",void r(c,(function(t,e){if(!t){var n=+new Date;c=e.indexOf('"put":":])([:"'),y(a,e=e.slice(0,c+6)+i+e.slice(c+14)),console.STAT&&console.STAT(n,+new Date-n,"say slice")}}));function y(n,i){n||(f.raw=i,e.say(t,o))}r(t,y)}}(),e.hi=function(o){var i,r=o.wire;r?(o.id?n.peers[o.url||o.id]=o:(i=o.id=o.id||String.random(9),e.say({dam:"?",pid:t.opt.pid},n.peers[i]=o),delete s.s[o.last]),o.met=o.met||+new Date,r.hied||t.on(r.hied="hi",o),i=o.queue,o.queue=[],setTimeout.each(i||[],(function(t){p(t,o)}),0,9)):e.wire(o.length&&{url:o}||o)},e.bye=function(n){t.on("bye",n);var o=+new Date;o-=n.met||o,e.bye.time=((e.bye.time||o)+o)/2},e.hear["!"]=function(t,e){n.log("Error:",t.err)},e.hear["?"]=function(t,o){t.pid&&(o.pid||(o.pid=t.pid),t["@"])||(e.say({dam:"?",pid:n.pid,"@":t["#"]},o),delete s.s[o.last])},t.on("create",(function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",e.say)})),t.on("bye",(function(t,e){t=n.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(e=t.wire)&&e.close&&e.close(),delete n.peers[t.id],t.wire=null}));var h={};return t.on("bye",(function(t,e){this.to.next(t),(e=console.STAT)&&(e.peers=(e.peers||0)-1),(e=t.url)&&(h[e]=!0,setTimeout((function(){delete h[e]}),n.lack||9e3))})),t.on("hi",(function(o,i){this.to.next(o),(i=console.STAT)&&(i.peers=(i.peers||0)+1),(i=o.url)&&h[i]&&(delete h[i],n.super||setTimeout.each(Object.keys(t.next),(function(n){t.next[n],(i={})[n]=t.graph[n],i=String.hash(i),e.say({"##":i,get:{"#":n}},o)})))})),e}}catch(t){}},938:()=>{String.random=function(t,e){var n="";for(t=t||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t-- >0;)n+=e.charAt(Math.floor(Math.random()*e.length));return n},String.match=function(t,e){var n,o;return"string"==typeof t&&("string"==typeof e&&(e={"=":e}),t===(n=(e=e||{})["="]||e["*"]||e[">"]||e["<"])||o===e["="]&&(n=e["*"]||e[">"],t.slice(0,(n||"").length)===n||o===e["*"]&&(o!==e[">"]&&o!==e["<"]?t>=e[">"]&&t<=e["<"]:o!==e[">"]&&t>=e[">"]||o!==e["<"]&&t<=e["<"])))},String.hash=function(t,e){if("string"==typeof t){if(e=e||0,!t.length)return e;for(var n=0,o=t.length;n<o;++n)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}};var t,e,n,o,i=Object.prototype.hasOwnProperty;Object.plain=function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])},Object.empty=function(t,e){for(var n in t)if(i.call(t,n)&&(!e||-1==e.indexOf(n)))return!1;return!0},Object.keys=Object.keys||function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},t=setTimeout,e=0,n=0,o=typeof setImmediate!=""+void 0&&setImmediate||t,t.hold=t.hold||9,t.poll=t.poll||function(i){t.hold>=+new Date-e&&n++<3333?i():o((function(){e=+new Date,i()}),n=0)},function(){var t,e=setTimeout,n=e.turn=e.turn||function(t){1==o.push(t)&&i(a)},o=n.s=[],i=e.poll,r=0,a=function(){(t=o[r++])&&t(),r!=o.length&&99!=r||(o=n.s=o.slice(r),r=0),o.length&&i(a)}}(),function(){var t,e=setTimeout,n=e.turn;(e.each=e.each||function(e,o,i,r){r=r||9,function a(s,u,c){if(u=(s=(e||[]).splice(0,r)).length){for(var f=0;f<u&&t===(c=o(s[f]));f++);if(t===c)return void n(a)}i&&i(c)}()})()}()},651:(t,e,n)=>{"use strict";n.r(e),n.d(e,{over:()=>o});const o=t=>e=>{const n=t[e];return o=>(t[e]=(...t)=>{"function"==typeof n&&n(...t),o(...t)},()=>{t[e]=n})}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={id:o,loaded:!1,exports:{}};return t[o](r,r.exports,n),r.loaded=!0,r.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{const t=n(56),e=n(982);n(970),n(321);const{over:o}=n(651);t.Mesh=e;class i{connections=new Set;root;workerGlobal;constructor(t=self,e){console.clear(),console.log("new ConnectionManager()"),this.workerGlobal=t,this.root=e,t.onconnect=t=>{const e=t.ports[0];this.opt.mesh.hi(new a(e,this))},e.on("bye",(function(t){console.log(`bye ${t.id}`),this.to.next(t)})),e.on("hi",(function(t){console.log(`hi ${t.id} ${t.pid}`),this.to.next(t)})),o(this.opt.mesh.hear)("?")(((t,e,n)=>{t["@"]&&console.log(`[${this.opt.pid}] peer ${e.pid} online`)})),o(this.opt.mesh.hear)("???")(((t,e,n)=>{this.peerPIDs.includes(t.pid)&&(console.log(`  ${t.pid} already present on ${e.id} ! Disconnect!`),e.say({"#":String.random(10),dam:"???---",pid:t.pid}))}))}get opt(){return this.root.opt}get peerPIDs(){return this.peers.filter((t=>t.pid)).map((t=>t.pid))}get peers(){return Object.keys(this.opt.peers).map((t=>this.opt.peers[t]))}removeConnection(t){this.opt.mesh.bye(t),this.connections.delete(t)}}let r;class a{port;lastSeen=Date.now();keepaliveInterval;seq=0;sessionPair=null;manager;root;calls=new Map;get sinceLastSeen(){return Date.now()-this.lastSeen}get wire(){return this.port}constructor(t,e){this.root=e.root,this.opt=this.root.opt,this.port=t,this.manager=e,this.mesh=this.root.mesh,t.start(),t.onmessage=t=>this.onMessage(t),t.onmessageerror=t=>this.onMessageError(t)}say(t){this.port.postMessage(t)}bye(){console.log("peer bye",this.pid)}onMessage({data:t}){this.opt.mesh.hear(t,this)}onMessageError(t){}log(t,...e){console.log(t,...e)}}if("undefined"==typeof window&&"undefined"!=typeof SharedWorkerGlobalScope){t.on("opt",(function(e){this.to.next(e);const n=e.opt;n.mesh=n.mesh||t.Mesh(e);n.manager=r,r=new i(self,e)}));const e=new t({peers:[],localStorage:!1,WebSocket:!1});console.log("gun:",e)}})()})();
//# sourceMappingURL=gun-shared.worker.js.map